{"version":3,"file":"chunks/gui.js","sources":["webpack://GUI/./src/playground/index.css","webpack://GUI/./src/playground/index.css?5c54","webpack://GUI/./src/playground/index.jsx","webpack://GUI/./src/playground/render-gui.jsx","webpack://GUI/./src/playground/userscripts/blocks2image.js","webpack://GUI/./src/playground/userscripts/catblocks.js","webpack://GUI/./src/playground/userscripts/cherrypicking.js","webpack://GUI/./src/playground/userscripts/index.js","webpack://GUI/./src/playground/userscripts/numberpad.js","webpack://GUI/./locale-data/complete.js (ignored)"],"sourcesContent":["exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"html,\\nbody,\\n.index_app_3Qs6X {\\n    /* probably unecessary, transitional until layout is refactored */\\n    width: 100%; \\n    height: 100%;\\n    margin: 0;\\n\\n    /* Setting min height/width makes the UI scroll below those sizes */\\n    min-width: 1024px;\\n    min-height: 640px; /* Min height to fit sprite/backdrop button */\\n}\\n\\n/* @todo: move globally? Safe / side FX, for blocks particularly? */\\n\\n* { -webkit-box-sizing: border-box; box-sizing: border-box; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"app\": \"index_app_3Qs6X\"\n};","\nvar content = require(\"!!../../node_modules/css-loader/index.js??ref--5-1!../../node_modules/postcss-loader/src/index.js??postcss!./index.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js??ref--5-1!../../node_modules/postcss-loader/src/index.js??postcss!./index.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js??ref--5-1!../../node_modules/postcss-loader/src/index.js??postcss!./index.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Polyfills\nimport 'es6-object-assign/auto';\nimport 'core-js/fn/array/includes';\nimport 'core-js/fn/promise/finally';\nimport 'intl'; // For Safari 9\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport AppStateHOC from '../lib/app-state-hoc.jsx';\nimport BrowserModalComponent from '../components/browser-modal/browser-modal.jsx';\nimport supportedBrowser from '../lib/supported-browser';\n\nimport styles from './index.css';\n\nconst appTarget = document.createElement('div');\nappTarget.className = styles.app;\ndocument.body.appendChild(appTarget);\n\nif (supportedBrowser()) {\n    // require needed here to avoid importing unsupported browser-crashing code\n    // at the top level\n    require('./render-gui.jsx').default(appTarget);\n\n} else {\n    BrowserModalComponent.setAppElement(appTarget);\n    const WrappedBrowserModalComponent = AppStateHOC(BrowserModalComponent, true /* localesOnly */);\n    const handleBack = () => {};\n    // eslint-disable-next-line react/jsx-no-bind\n    ReactDOM.render(<WrappedBrowserModalComponent onBack={handleBack} />, appTarget);\n}\n\nrequire(\"./userscripts\");","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {compose} from 'redux';\n\nimport AppStateHOC from '../lib/app-state-hoc.jsx';\nimport GUI from '../containers/gui.jsx';\nimport HashParserHOC from '../lib/hash-parser-hoc.jsx';\nimport log from '../lib/log.js';\n\nconst onClickLogo = () => {\n    window.location = 'https://scratch.mit.edu';\n};\n\nconst handleTelemetryModalCancel = () => {\n    log('User canceled telemetry modal');\n};\n\nconst handleTelemetryModalOptIn = () => {\n    log('User opted into telemetry');\n};\n\nconst handleTelemetryModalOptOut = () => {\n    log('User opted out of telemetry');\n};\n\n/*\n * Render the GUI playground. This is a separate function because importing anything\n * that instantiates the VM causes unsupported browsers to crash\n * {object} appTarget - the DOM element to render to\n */\nexport default appTarget => {\n    GUI.setAppElement(appTarget);\n\n    // note that redux's 'compose' function is just being used as a general utility to make\n    // the hierarchy of HOC constructor calls clearer here; it has nothing to do with redux's\n    // ability to compose reducers.\n    const WrappedGui = compose(\n        AppStateHOC,\n        HashParserHOC\n    )(GUI);\n\n    // TODO a hack for testing the backpack, allow backpack host to be set by url param\n    const backpackHostMatches = window.location.href.match(/[?&]backpack_host=([^&]*)&?/);\n    const backpackHost = backpackHostMatches ? backpackHostMatches[1] : null;\n\n    const scratchDesktopMatches = window.location.href.match(/[?&]isScratchDesktop=([^&]+)/);\n    let simulateScratchDesktop;\n    if (scratchDesktopMatches) {\n        try {\n            // parse 'true' into `true`, 'false' into `false`, etc.\n            simulateScratchDesktop = JSON.parse(scratchDesktopMatches[1]);\n        } catch {\n            // it's not JSON so just use the string\n            // note that a typo like \"falsy\" will be treated as true\n            simulateScratchDesktop = scratchDesktopMatches[1];\n        }\n    }\n\n    if (process.env.NODE_ENV === 'production' && typeof window === 'object') {\n        // Warn before navigating away\n        window.onbeforeunload = () => true;\n    }\n\n    ReactDOM.render(\n        // important: this is checking whether `simulateScratchDesktop` is truthy, not just defined!\n        simulateScratchDesktop ?\n            <WrappedGui\n                canEditTitle\n                isScratchDesktop\n                showTelemetryModal\n                canSave={false}\n                onTelemetryModalCancel={handleTelemetryModalCancel}\n                onTelemetryModalOptIn={handleTelemetryModalOptIn}\n                onTelemetryModalOptOut={handleTelemetryModalOptOut}\n            /> :\n            <WrappedGui\n                canEditTitle\n                backpackVisible\n                showComingSoon\n                backpackHost={backpackHost}\n                canSave={false}\n                onClickLogo={onClickLogo}\n            />,\n        appTarget);\n};\n","module.exports = {\r\n  func: function (createBlockContextMenu) {\r\n    function makeStyle() {\r\n      let style = document.createElement(\"style\");\r\n      style.textContent = `\r\n        .blocklyText {\r\n            fill: #fff;\r\n            font-family: \"Helvetica Neue\", Helvetica, sans-serif;\r\n            font-size: 12pt;\r\n            font-weight: 500;\r\n        }\r\n        .blocklyNonEditableText>text, .blocklyEditableText>text {\r\n            fill: #575E75;\r\n        }\r\n        .blocklyDropdownText {\r\n            fill: #fff !important;\r\n        }\r\n        `;\r\n      for (let userstyle of document.querySelectorAll(\r\n        \".scratch-addons-style[data-addon-id='editor-theme3']\"\r\n      )) {\r\n        if (userstyle.disabled) continue;\r\n        style.textContent += userstyle.textContent;\r\n      }\r\n      return style;\r\n    }\r\n\r\n    function setCSSVars(element) {\r\n      for (let property of document.documentElement.style) {\r\n        if (property.startsWith(\"--editorTheme3-\"))\r\n          element.style.setProperty(\r\n            property,\r\n            document.documentElement.style.getPropertyValue(property)\r\n          );\r\n      }\r\n    }\r\n    if (localStorage.getItem(\"blocks2image\") === \"true\") {\r\n      let exSVG = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n      exSVG.setAttribute(\"xmlns:html\", \"http://www.w3.org/1999/xhtml\");\r\n      exSVG.setAttribute(\"xmlns:xlink\", \"http://www.w3.org/1999/xlink\");\r\n      exSVG.setAttribute(\"version\", \"1.1\");\r\n\r\n      let blocksMedia = new Map();\r\n      blocksMedia.set(\r\n        \"repeat.svg\",\r\n        \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIxLjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9InJlcGVhdCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiCgkgdmlld0JveD0iMCAwIDI0IDI0IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyNCAyNDsiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPgoJLnN0MHtmaWxsOiNDRjhCMTc7fQoJLnN0MXtmaWxsOiNGRkZGRkY7fQo8L3N0eWxlPgo8dGl0bGU+cmVwZWF0PC90aXRsZT4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTIzLjMsMTFjLTAuMywwLjYtMC45LDEtMS41LDFoLTEuNmMtMC4xLDEuMy0wLjUsMi41LTEuMSwzLjZjLTAuOSwxLjctMi4zLDMuMi00LjEsNC4xCgljLTEuNywwLjktMy42LDEuMi01LjUsMC45Yy0xLjgtMC4zLTMuNS0xLjEtNC45LTIuM2MtMC43LTAuNy0wLjctMS45LDAtMi42YzAuNi0wLjYsMS42LTAuNywyLjMtMC4ySDdjMC45LDAuNiwxLjksMC45LDIuOSwwLjkKCXMxLjktMC4zLDIuNy0wLjljMS4xLTAuOCwxLjgtMi4xLDEuOC0zLjVoLTEuNWMtMC45LDAtMS43LTAuNy0xLjctMS43YzAtMC40LDAuMi0wLjksMC41LTEuMmw0LjQtNC40YzAuNy0wLjYsMS43LTAuNiwyLjQsMEwyMyw5LjIKCUMyMy41LDkuNywyMy42LDEwLjQsMjMuMywxMXoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTIxLjgsMTFoLTIuNmMwLDEuNS0wLjMsMi45LTEsNC4yYy0wLjgsMS42LTIuMSwyLjgtMy43LDMuNmMtMS41LDAuOC0zLjMsMS4xLTQuOSwwLjhjLTEuNi0wLjItMy4yLTEtNC40LTIuMQoJYy0wLjQtMC4zLTAuNC0wLjktMC4xLTEuMmMwLjMtMC40LDAuOS0wLjQsMS4yLTAuMWwwLDBjMSwwLjcsMi4yLDEuMSwzLjQsMS4xczIuMy0wLjMsMy4zLTFjMC45LTAuNiwxLjYtMS41LDItMi42CgljMC4zLTAuOSwwLjQtMS44LDAuMi0yLjhoLTIuNGMtMC40LDAtMC43LTAuMy0wLjctMC43YzAtMC4yLDAuMS0wLjMsMC4yLTAuNGw0LjQtNC40YzAuMy0wLjMsMC43LTAuMywwLjksMEwyMiw5LjgKCWMwLjMsMC4zLDAuNCwwLjYsMC4zLDAuOVMyMiwxMSwyMS44LDExeiIvPgo8L3N2Zz4K\"\r\n      );\r\n      blocksMedia.set(\r\n        \"green-flag.svg\",\r\n        \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIxLjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9ImdyZWVuZmxhZyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiCgkgdmlld0JveD0iMCAwIDI0IDI0IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyNCAyNDsiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPgoJLnN0MHtmaWxsOiM0NTk5M0Q7fQoJLnN0MXtmaWxsOiM0Q0JGNTY7fQo8L3N0eWxlPgo8dGl0bGU+Z3JlZW5mbGFnPC90aXRsZT4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTIwLjgsMy43Yy0wLjQtMC4yLTAuOS0wLjEtMS4yLDAuMmMtMiwxLjYtNC44LDEuNi02LjgsMGMtMi4zLTEuOS01LjYtMi4zLTguMy0xVjIuNWMwLTAuNi0wLjUtMS0xLTEKCXMtMSwwLjQtMSwxdjE4LjhjMCwwLjUsMC41LDEsMSwxaDAuMWMwLjUsMCwxLTAuNSwxLTF2LTYuNGMxLTAuNywyLjEtMS4yLDMuNC0xLjNjMS4yLDAsMi40LDAuNCwzLjQsMS4yYzIuOSwyLjMsNywyLjMsOS44LDAKCWMwLjMtMC4yLDAuNC0wLjUsMC40LTAuOVY0LjdDMjEuNiw0LjIsMjEuMywzLjgsMjAuOCwzLjd6IE0yMC41LDEzLjlDMjAuNSwxMy45LDIwLjUsMTMuOSwyMC41LDEzLjlDMTgsMTYsMTQuNCwxNiwxMS45LDE0CgljLTEuMS0wLjktMi41LTEuNC00LTEuNGMtMS4yLDAuMS0yLjMsMC41LTMuNCwxLjFWNEM3LDIuNiwxMCwyLjksMTIuMiw0LjZjMi40LDEuOSw1LjcsMS45LDguMSwwYzAuMSwwLDAuMSwwLDAuMiwwCgljMCwwLDAuMSwwLjEsMC4xLDAuMUwyMC41LDEzLjl6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yMC42LDQuOGwtMC4xLDkuMWMwLDAsMCwwLjEsMCwwLjFjLTIuNSwyLTYuMSwyLTguNiwwYy0xLjEtMC45LTIuNS0xLjQtNC0xLjRjLTEuMiwwLjEtMi4zLDAuNS0zLjQsMS4xVjQKCUM3LDIuNiwxMCwyLjksMTIuMiw0LjZjMi40LDEuOSw1LjcsMS45LDguMSwwYzAuMSwwLDAuMSwwLDAuMiwwQzIwLjUsNC43LDIwLjYsNC43LDIwLjYsNC44eiIvPgo8L3N2Zz4K\"\r\n      );\r\n      blocksMedia.set(\r\n        \"rotate-left.svg\",\r\n        \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIGlkPSJyb3RhdGUtY2xvY2t3aXNlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHN0eWxlPi5jbHMtMXtmaWxsOiMzZDc5Y2M7fS5jbHMtMntmaWxsOiNmZmY7fTwvc3R5bGU+PHRpdGxlPnJvdGF0ZS1jbG9ja3dpc2U8L3RpdGxlPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTIwLjM0LDE4LjIxYTEwLjI0LDEwLjI0LDAsMCwxLTguMSw0LjIyLDIuMjYsMi4yNiwwLDAsMS0uMTYtNC41MmgwYTUuNTgsNS41OCwwLDAsMCw0LjI1LTIuNTMsNS4wNiw1LjA2LDAsMCwwLC41NC00LjYyQTQuMjUsNC4yNSwwLDAsMCwxNS41NSw5YTQuMzEsNC4zMSwwLDAsMC0yLS44QTQuODIsNC44MiwwLDAsMCwxMC40LDlsMS4xMiwxLjQxQTEuNTksMS41OSwwLDAsMSwxMC4zNiwxM0gyLjY3YTEuNTYsMS41NiwwLDAsMS0xLjI2LS42M0ExLjU0LDEuNTQsMCwwLDEsMS4xMywxMUwyLjg1LDMuNTdBMS41OSwxLjU5LDAsMCwxLDQuMzgsMi40LDEuNTcsMS41NywwLDAsMSw1LjYyLDNMNi43LDQuMzVhMTAuNjYsMTAuNjYsMCwwLDEsNy43Mi0xLjY4QTkuODgsOS44OCwwLDAsMSwxOSw0LjgxLDkuNjEsOS42MSwwLDAsMSwyMS44Myw5LDEwLjA4LDEwLjA4LDAsMCwxLDIwLjM0LDE4LjIxWiIvPjxwYXRoIGNsYXNzPSJjbHMtMiIgZD0iTTE5LjU2LDE3LjY1YTkuMjksOS4yOSwwLDAsMS03LjM1LDMuODMsMS4zMSwxLjMxLDAsMCwxLS4wOC0yLjYyLDYuNTMsNi41MywwLDAsMCw1LTIuOTIsNi4wNSw2LjA1LDAsMCwwLC42Ny01LjUxLDUuMzIsNS4zMiwwLDAsMC0xLjY0LTIuMTYsNS4yMSw1LjIxLDAsMCwwLTIuNDgtMUE1Ljg2LDUuODYsMCwwLDAsOSw4Ljg0TDEwLjc0LDExYS41OS41OSwwLDAsMS0uNDMsMUgyLjdhLjYuNiwwLDAsMS0uNi0uNzVMMy44MSwzLjgzYS41OS41OSwwLDAsMSwxLS4yMWwxLjY3LDIuMWE5LjcxLDkuNzEsMCwwLDEsNy43NS0yLjA3LDguODQsOC44NCwwLDAsMSw0LjEyLDEuOTIsOC42OCw4LjY4LDAsMCwxLDIuNTQsMy43MkE5LjE0LDkuMTQsMCwwLDEsMTkuNTYsMTcuNjVaIi8+PC9zdmc+\"\r\n      );\r\n      blocksMedia.set(\r\n        \"rotate-right.svg\",\r\n        \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIGlkPSJyb3RhdGUtY291bnRlci1jbG9ja3dpc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDI0IDI0Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzNkNzljYzt9LmNscy0ye2ZpbGw6I2ZmZjt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPnJvdGF0ZS1jb3VudGVyLWNsb2Nrd2lzZTwvdGl0bGU+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNMjIuNjgsMTIuMmExLjYsMS42LDAsMCwxLTEuMjcuNjNIMTMuNzJhMS41OSwxLjU5LDAsMCwxLTEuMTYtMi41OGwxLjEyLTEuNDFhNC44Miw0LjgyLDAsMCwwLTMuMTQtLjc3LDQuMzEsNC4zMSwwLDAsMC0yLC44LDQuMjUsNC4yNSwwLDAsMC0xLjM0LDEuNzMsNS4wNiw1LjA2LDAsMCwwLC41NCw0LjYyQTUuNTgsNS41OCwwLDAsMCwxMiwxNy43NGgwYTIuMjYsMi4yNiwwLDAsMS0uMTYsNC41MkExMC4yNSwxMC4yNSwwLDAsMSwzLjc0LDE4LDEwLjE0LDEwLjE0LDAsMCwxLDIuMjUsOC43OCw5LjcsOS43LDAsMCwxLDUuMDgsNC42NCw5LjkyLDkuOTIsMCwwLDEsOS42NiwyLjVhMTAuNjYsMTAuNjYsMCwwLDEsNy43MiwxLjY4bDEuMDgtMS4zNWExLjU3LDEuNTcsMCwwLDEsMS4yNC0uNiwxLjYsMS42LDAsMCwxLDEuNTQsMS4yMWwxLjcsNy4zN0ExLjU3LDEuNTcsMCwwLDEsMjIuNjgsMTIuMloiLz48cGF0aCBjbGFzcz0iY2xzLTIiIGQ9Ik0yMS4zOCwxMS44M0gxMy43N2EuNTkuNTksMCwwLDEtLjQzLTFsMS43NS0yLjE5YTUuOSw1LjksMCwwLDAtNC43LTEuNTgsNS4wNyw1LjA3LDAsMCwwLTQuMTEsMy4xN0E2LDYsMCwwLDAsNywxNS43N2E2LjUxLDYuNTEsMCwwLDAsNSwyLjkyLDEuMzEsMS4zMSwwLDAsMS0uMDgsMi42Miw5LjMsOS4zLDAsMCwxLTcuMzUtMy44MkE5LjE2LDkuMTYsMCwwLDEsMy4xNyw5LjEyLDguNTEsOC41MSwwLDAsMSw1LjcxLDUuNCw4Ljc2LDguNzYsMCwwLDEsOS44MiwzLjQ4YTkuNzEsOS43MSwwLDAsMSw3Ljc1LDIuMDdsMS42Ny0yLjFhLjU5LjU5LDAsMCwxLDEsLjIxTDIyLDExLjA4QS41OS41OSwwLDAsMSwyMS4zOCwxMS44M1oiLz48L3N2Zz4=\"\r\n      );\r\n      blocksMedia.set(\r\n        \"dropdown-arrow.svg\",\r\n        \"data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=\"\r\n      );\r\n\r\n      createBlockContextMenu(\r\n        (items) => {\r\n          let svgchild = document.querySelector(\r\n            \"svg.blocklySvg g.blocklyBlockCanvas\"\r\n          );\r\n\r\n          const pasteItemIndex = items.findIndex((obj) => obj._isDevtoolsFirstItem);\r\n          const insertBeforeIndex =\r\n            pasteItemIndex !== -1\r\n              ? // If \"paste\" button exists, add own items before it\r\n              pasteItemIndex\r\n              : // If there's no such button, insert at end\r\n              items.length;\r\n\r\n          items.splice(\r\n            insertBeforeIndex,\r\n            0,\r\n            {\r\n              enabled: !!svgchild?.childNodes?.length,\r\n              text: \"Export All to SVG\",\r\n              callback: () => {\r\n                exportBlock(false);\r\n              },\r\n              separator: true,\r\n            },\r\n            {\r\n              enabled: !!svgchild?.childNodes?.length,\r\n              text: \"Export All to PNG\",\r\n              callback: () => {\r\n                exportBlock(true);\r\n              },\r\n              separator: false,\r\n            }\r\n          );\r\n\r\n          return items;\r\n        },\r\n        { workspace: true }\r\n      );\r\n      createBlockContextMenu(\r\n        (items, block) => {\r\n          const makeSpaceItemIndex = items.findIndex(\r\n            (obj) => obj._isDevtoolsFirstItem\r\n          );\r\n          const insertBeforeIndex =\r\n            makeSpaceItemIndex !== -1\r\n              ? // If \"make space\" button exists, add own items before it\r\n              makeSpaceItemIndex\r\n              : // If there's no such button, insert at end\r\n              items.length;\r\n\r\n          items.splice(\r\n            insertBeforeIndex,\r\n            0,\r\n            {\r\n              enabled: true,\r\n              text: \"Export Selected Block to SVG\",\r\n              callback: () => {\r\n                exportBlock(false, block);\r\n              },\r\n              separator: true,\r\n            },\r\n            {\r\n              enabled: true,\r\n              text: \"Export Selected Block to PNG\",\r\n              callback: () => {\r\n                exportBlock(true, block);\r\n              },\r\n              separator: false,\r\n            }\r\n          );\r\n\r\n          return items;\r\n        },\r\n        { blocks: true }\r\n      );\r\n    }\r\n\r\n\r\n\r\n    function exportBlock(isExportPNG, block) {\r\n      let svg;\r\n      if (block) {\r\n        svg = selectedBlocks(isExportPNG, block);\r\n      } else {\r\n        svg = allBlocks(isExportPNG);\r\n      }\r\n      // resolve nbsp whitespace\r\n      svg.querySelectorAll(\"text\").forEach((text) => {\r\n        text.innerHTML = text.innerHTML.replace(/&nbsp;/g, \" \");\r\n      });\r\n      // resolve image path\r\n      let scratchURL = window.location.origin;\r\n\r\n      svg.querySelectorAll(\"image\").forEach((item) => {\r\n        let builtinSvgData = blocksMedia.get(\r\n          item\r\n            .getAttribute(\"xlink:href\")\r\n            .substring(item.getAttribute(\"xlink:href\").lastIndexOf(\"/\") + 1)\r\n        );\r\n        if (builtinSvgData) {\r\n          // replace svg file path (official) to inline svg\r\n          item.setAttribute(\"xlink:href\", builtinSvgData);\r\n        } else if (item.getAttribute(\"xlink:href\").indexOf(\"/static/\") === 0) {\r\n          // replace link path for third party website\r\n          item.setAttribute(\r\n            \"xlink:href\",\r\n            scratchURL + item.getAttribute(\"xlink:href\").slice(0)\r\n          );\r\n        } else if (item.getAttribute(\"xlink:href\").indexOf(\"./static/\") === 0) {\r\n          item.setAttribute(\r\n            \"xlink:href\",\r\n            scratchURL + item.getAttribute(\"xlink:href\").slice(1)\r\n          );\r\n        } else if (item.getAttribute(\"xlink:href\").indexOf(\"static/\") === 0) {\r\n          item.setAttribute(\r\n            \"xlink:href\",\r\n            scratchURL + \"/\" + item.getAttribute(\"xlink:href\")\r\n          );\r\n        }\r\n      });\r\n      if (!isExportPNG) {\r\n        exportData(new XMLSerializer().serializeToString(svg));\r\n      } else {\r\n        exportPNG(svg);\r\n      }\r\n    }\r\n\r\n    function selectedBlocks(isExportPNG, block) {\r\n      let svg = exSVG.cloneNode();\r\n\r\n      let svgchild = block.svgGroup_;\r\n      svgchild = svgchild.cloneNode(true);\r\n      let dataShapes = svgchild.getAttribute(\"data-shapes\");\r\n      svgchild.setAttribute(\r\n        \"transform\",\r\n        `translate(0,${dataShapes === \"hat\" ? \"18\" : \"0\"}) ${isExportPNG ? \"scale(2)\" : \"\"\r\n        }`\r\n      );\r\n      setCSSVars(svg);\r\n      svg.append(makeStyle());\r\n      svg.append(svgchild);\r\n      return svg;\r\n    }\r\n\r\n    function allBlocks(isExportPNG) {\r\n      let svg = exSVG.cloneNode();\r\n\r\n      let svgchild = document.querySelector(\"svg.blocklySvg g.blocklyBlockCanvas\");\r\n      svgchild = svgchild.cloneNode(true);\r\n\r\n      let xArr = [];\r\n      let yArr = [];\r\n\r\n      svgchild.childNodes.forEach((g) => {\r\n        let x =\r\n          g.getAttribute(\"transform\").match(/translate\\((.*?),(.*?)\\)/)[1] || 0;\r\n        let y =\r\n          g.getAttribute(\"transform\").match(/translate\\((.*?),(.*?)\\)/)[2] || 0;\r\n        xArr.push(x * (isExportPNG ? 2 : 1));\r\n        yArr.push(y * (isExportPNG ? 2 : 1));\r\n      });\r\n\r\n      svgchild.setAttribute(\r\n        \"transform\",\r\n        `translate(${-Math.min(...xArr)},${-Math.min(...yArr) + 18 * (isExportPNG ? 2 : 1)\r\n        }) ${isExportPNG ? \"scale(2)\" : \"\"}`\r\n      );\r\n      setCSSVars(svg);\r\n      svg.append(makeStyle());\r\n      svg.append(svgchild);\r\n      return svg;\r\n    }\r\n\r\n    function exportData(text) {\r\n      const saveLink = document.createElement(\"a\");\r\n      document.body.appendChild(saveLink);\r\n\r\n      const data = new Blob([text], { type: \"text\" });\r\n      const url = window.URL.createObjectURL(data);\r\n      saveLink.href = url;\r\n\r\n      const date = new Date();\r\n      const timestamp = `${date.toLocaleDateString()}-${date.toLocaleTimeString()}`;\r\n      saveLink.download = `block_${timestamp}.svg`;\r\n      saveLink.click();\r\n      window.URL.revokeObjectURL(url);\r\n      document.body.removeChild(saveLink);\r\n    }\r\n\r\n    function exportPNG(svg) {\r\n      const serializer = new XMLSerializer();\r\n      const iframe = document.createElement(\"iframe\");\r\n      document.body.append(iframe);\r\n      iframe.contentDocument.write(serializer.serializeToString(svg));\r\n      let { width, height } = iframe.contentDocument.body\r\n        .querySelector(\"svg g\")\r\n        .getBoundingClientRect();\r\n      height = height + 20 * 2;\r\n      svg.setAttribute(\"width\", width + \"px\");\r\n      svg.setAttribute(\"height\", height + \"px\");\r\n\r\n      let canvas = document.createElement(\"canvas\");\r\n      let ctx = canvas.getContext(\"2d\");\r\n\r\n      let img = document.createElement(\"img\");\r\n\r\n      img.setAttribute(\r\n        \"src\",\r\n        \"data:image/svg+xml;base64,\" +\r\n        btoa(unescape(encodeURIComponent(serializer.serializeToString(svg))))\r\n      );\r\n      img.onload = function () {\r\n        canvas.height = img.height;\r\n        canvas.width = img.width;\r\n        ctx.drawImage(img, 0, 0, img.width, img.height);\r\n        let dataURL = canvas.toDataURL(\"image/png\");\r\n        let link = document.createElement(\"a\");\r\n        const date = new Date();\r\n        const timestamp = `${date.toLocaleDateString()}-${date.toLocaleTimeString()}`;\r\n\r\n        link.download = `block_${timestamp}.png`;\r\n        link.href = dataURL;\r\n        link.click();\r\n        iframe.remove();\r\n      };\r\n    }\r\n  }\r\n}","module.exports = {func: function () {\r\n    if (localStorage.getItem(\"catblocks\") === \"true\") {\r\n        const shouldWatchMouseCursor = !1;\r\n        (ScratchBlocks.BlockSvg.START_HAT_HEIGHT = 31),\r\n            (ScratchBlocks.BlockSvg.START_HAT_PATH =\r\n                \"c2.6,-2.3 5.5,-4.3 8.5,-6.2c-1,-12.5 5.3,-23.3 8.4,-24.8c3.7,-1.8 16.5,13.1 18.4,15.4c8.4,-1.3 17,-1.3 25.4,0c1.9,-2.3 14.7,-17.2 18.4,-15.4c3.1,1.5 9.4,12.3 8.4,24.8c3,1.8 5.9,3.9 8.5,6.1\"),\r\n            (ScratchBlocks.BlockSvg.prototype.renderCatFace_ = function () {\r\n                this.catPath_.svgFace.setAttribute(\"fill\", \"#000000\");\r\n                var t = ScratchBlocks.utils.createSvgElement(\"path\", {}, this.svgFace_);\r\n                t.setAttribute(\r\n                    \"d\",\r\n                    \"M25.2-1.1c0.1,0,0.2,0,0.2,0l8.3-2.1l-7-4.8c-0.5-0.3-1.1-0.2-1.4,0.3s-0.2,1.1,0.3,1.4L29-4.1l-4,1c-0.5,0.1-0.9,0.7-0.7,1.2C24.3-1.4,24.7-1.1,25.2-1.1z\"\r\n                ),\r\n                    t.setAttribute(\"fill-opacity\", \"0\"),\r\n                    (this.catPath_.svgFace.closedEye = t);\r\n                var e = ScratchBlocks.utils.createSvgElement(\"path\", {}, this.svgFace_);\r\n                e.setAttribute(\r\n                    \"d\",\r\n                    \"M62.4-1.1c-0.1,0-0.2,0-0.2,0l-8.3-2.1l7-4.8c0.5-0.3,1.1-0.2,1.4,0.3s0.2,1.1-0.3,1.4l-3.4,2.3l4,1c0.5,0.1,0.9,0.7,0.7,1.2C63.2-1.4,62.8-1.1,62.4-1.1z\"\r\n                ),\r\n                    e.setAttribute(\"fill-opacity\", \"0\"),\r\n                    (this.catPath_.svgFace.closedEye2 = e);\r\n                var c = ScratchBlocks.utils.createSvgElement(\"circle\", {}, this.svgFace_);\r\n                c.setAttribute(\"cx\", \"59.2\"),\r\n                    c.setAttribute(\"cy\", \"-3.3\"),\r\n                    c.setAttribute(\"r\", \"3.4\"),\r\n                    c.setAttribute(\"fill-opacity\", \"0.6\"),\r\n                    (this.catPath_.svgFace.eye = c);\r\n                var a = ScratchBlocks.utils.createSvgElement(\"circle\", {}, this.svgFace_);\r\n                a.setAttribute(\"cx\", \"29.1\"),\r\n                    a.setAttribute(\"cy\", \"-3.3\"),\r\n                    a.setAttribute(\"r\", \"3.4\"),\r\n                    a.setAttribute(\"fill-opacity\", \"0.6\"),\r\n                    (this.catPath_.svgFace.eye2 = a);\r\n                var s = ScratchBlocks.utils.createSvgElement(\"path\", {}, this.svgFace_);\r\n                s.setAttribute(\r\n                    \"d\",\r\n                    \"M45.6,0.1c-0.9,0-1.7-0.3-2.3-0.9c-0.6,0.6-1.3,0.9-2.2,0.9c-0.9,0-1.8-0.3-2.3-0.9c-1-1.1-1.1-2.6-1.1-2.8c0-0.5,0.5-1,1-1l0,0c0.6,0,1,0.5,1,1c0,0.4,0.1,1.7,1.4,1.7c0.5,0,0.7-0.2,0.8-0.3c0.3-0.3,0.4-1,0.4-1.3c0-0.1,0-0.1,0-0.2c0-0.5,0.5-1,1-1l0,0c0.5,0,1,0.4,1,1c0,0,0,0.1,0,0.2c0,0.3,0.1,0.9,0.4,1.2C44.8-2.2,45-2,45.5-2s0.7-0.2,0.8-0.3c0.3-0.4,0.4-1.1,0.3-1.3c0-0.5,0.4-1,0.9-1.1c0.5,0,1,0.4,1.1,0.9c0,0.2,0.1,1.8-0.8,2.8C47.5-0.4,46.8,0.1,45.6,0.1z\"\r\n                ),\r\n                    s.setAttribute(\"fill-opacity\", \"0.6\"),\r\n                    this.catPath_.ear.setAttribute(\r\n                        \"d\",\r\n                        \"M73.1-15.6c1.7-4.2,4.5-9.1,5.8-8.5c1.6,0.8,5.4,7.9,5,15.4c0,0.6-0.7,0.7-1.1,0.5c-3-1.6-6.4-2.8-8.6-3.6C72.8-12.3,72.4-13.7,73.1-15.6z\"\r\n                    ),\r\n                    this.catPath_.ear.setAttribute(\"fill\", \"#FFD5E6\"),\r\n                    this.catPath_.ear2.setAttribute(\r\n                        \"d\",\r\n                        \"M22.4-15.6c-1.7-4.2-4.5-9.1-5.8-8.5c-1.6,0.8-5.4,7.9-5,15.4c0,0.6,0.7,0.7,1.1,0.5c3-1.6,6.4-2.8,8.6-3.6C22.8-12.3,23.2-13.7,22.4-15.6z\"\r\n                    ),\r\n                    this.catPath_.ear2.setAttribute(\"fill\", \"#FFD5E6\");\r\n            }),\r\n            (ScratchBlocks.BlockSvg.prototype.initCatStuff = function () {\r\n                if (!this.hasInitCatStuff) {\r\n                    this.hasInitCatStuff = !0;\r\n                    var t = \"c-1,-12.5 5.3,-23.3 8.4,-24.8c3.7,-1.8 16.5,13.1 18.4,15.4\",\r\n                        e = \"c-5.8,-4.8 -8,-18 -4.9,-19.5c3.7,-1.8 24.5,11.1 31.7,10.1\",\r\n                        c = \"c1.9,-2.3 14.7,-17.2 18.4,-15.4c3.1,1.5 9.4,12.3 8.4,24.8\",\r\n                        a = \"c7.2,1 28,-11.9 31.7,-10.1c3.1,1.5 0.9,14.7 -4.9,19.5\",\r\n                        s =\r\n                            \"c0,-7.1 3.7,-13.3 9.3,-16.9c1.7,-7.5 5.4,-13.2 7.6,-14.2c2.6,-1.3 10,6 14.6,11.1\",\r\n                        i =\r\n                            \"h33c4.6,-5.1 11.9,-12.4 14.6,-11.1c1.9,0.9 4.9,5.2 6.8,11.1c2.6,0,5.2,0,7.8,0\",\r\n                        r =\r\n                            \"c0,-4.6 1.6,-8.9 4.3,-12.3c-2.4,-5.6 -2.9,-12.4 -0.7,-13.4c2.1,-1 9.6,2.6 17,5.8c2.6,0 6.2,0 10.9,0\",\r\n                        o =\r\n                            \"c0,0 25.6,0 44,0c7.4,-3.2 14.8,-6.8 16.9,-5.8c1.2,0.6 1.6,2.9 1.3,5.8\",\r\n                        l = this;\r\n                    (this.catPath_.ear = ScratchBlocks.utils.createSvgElement(\r\n                        \"path\",\r\n                        {},\r\n                        this.catPath_\r\n                    )),\r\n                        (this.catPath_.ear2 = ScratchBlocks.utils.createSvgElement(\r\n                            \"path\",\r\n                            {},\r\n                            this.catPath_\r\n                        )),\r\n                        this.RTL &&\r\n                        (this.catPath_.ear.setAttribute(\"transform\", \"scale(-1 1)\"),\r\n                            this.catPath_.ear2.setAttribute(\"transform\", \"scale(-1 1)\")),\r\n                        this.catPath_.addEventListener(\"mouseenter\", function (t) {\r\n                            clearTimeout(l.blinkFn),\r\n                                t.target.svgFace.eye &&\r\n                                (t.target.svgFace.eye.setAttribute(\"fill-opacity\", \"0\"),\r\n                                    t.target.svgFace.eye2.setAttribute(\"fill-opacity\", \"0\"),\r\n                                    t.target.svgFace.closedEye.setAttribute(\"fill-opacity\", \"0.6\"),\r\n                                    t.target.svgFace.closedEye2.setAttribute(\r\n                                        \"fill-opacity\",\r\n                                        \"0.6\"\r\n                                    )),\r\n                                (l.blinkFn = setTimeout(function () {\r\n                                    t.target.svgFace.eye &&\r\n                                        (t.target.svgFace.eye.setAttribute(\"fill-opacity\", \"0.6\"),\r\n                                            t.target.svgFace.eye2.setAttribute(\"fill-opacity\", \"0.6\"),\r\n                                            t.target.svgFace.closedEye.setAttribute(\"fill-opacity\", \"0\"),\r\n                                            t.target.svgFace.closedEye2.setAttribute(\r\n                                                \"fill-opacity\",\r\n                                                \"0\"\r\n                                            ));\r\n                                }, 100));\r\n                        }),\r\n                        this.catPath_.ear.addEventListener(\"mouseenter\", function () {\r\n                            clearTimeout(l.earFn),\r\n                                clearTimeout(l.ear2Fn),\r\n                                l.catPath_.ear.setAttribute(\"fill-opacity\", \"0\"),\r\n                                l.catPath_.ear2.setAttribute(\"fill-opacity\", \"\");\r\n                            var h = l.catPath_.svgBody.getAttribute(\"d\");\r\n                            (h = (h = (h = (h = h.replace(c, a)).replace(i, o)).replace(\r\n                                e,\r\n                                t\r\n                            )).replace(r, s)),\r\n                                l.catPath_.svgBody.setAttribute(\"d\", h),\r\n                                (l.earFn = setTimeout(function () {\r\n                                    l.catPath_.ear.setAttribute(\"fill-opacity\", \"\");\r\n                                    var t = l.catPath_.svgBody.getAttribute(\"d\");\r\n                                    (t = (t = t.replace(a, c)).replace(o, i)),\r\n                                        l.catPath_.svgBody.setAttribute(\"d\", t);\r\n                                }, 50));\r\n                        }),\r\n                        this.catPath_.ear2.addEventListener(\"mouseenter\", function () {\r\n                            clearTimeout(l.earFn),\r\n                                clearTimeout(l.ear2Fn),\r\n                                l.catPath_.ear2.setAttribute(\"fill-opacity\", \"0\"),\r\n                                l.catPath_.ear.setAttribute(\"fill-opacity\", \"\");\r\n                            var h = l.catPath_.svgBody.getAttribute(\"d\");\r\n                            (h = (h = (h = (h = h.replace(t, e)).replace(s, r)).replace(\r\n                                a,\r\n                                c\r\n                            )).replace(o, i)),\r\n                                l.catPath_.svgBody.setAttribute(\"d\", h),\r\n                                (l.ear2Fn = setTimeout(function () {\r\n                                    l.catPath_.ear2.setAttribute(\"fill-opacity\", \"\");\r\n                                    var c = l.catPath_.svgBody.getAttribute(\"d\");\r\n                                    (c = (c = c.replace(e, t)).replace(r, s)),\r\n                                        l.catPath_.svgBody.setAttribute(\"d\", c);\r\n                                }, 50));\r\n                        }),\r\n                        this.RTL && (this.svgFace_.style.transform = \"translate(-87px, 0px)\"),\r\n                        this.shouldWatchMouse() &&\r\n                        ((this.windowListener = function (t) {\r\n                            var e = Date.now();\r\n                            if (\r\n                                !(e < l.lastCallTime + l.CALL_FREQUENCY_MS) &&\r\n                                ((l.lastCallTime = e), l.shouldWatchMouse() && l.workspace)\r\n                            ) {\r\n                                var c = l.getCatFacePosition(),\r\n                                    a = {\r\n                                        x: t.x / l.workspace.scale,\r\n                                        y: t.y / l.workspace.scale,\r\n                                    },\r\n                                    s = a.x - c.x,\r\n                                    i = a.y - c.y,\r\n                                    r = Math.atan2(s, i),\r\n                                    o = Math.sqrt(s * s + i * i),\r\n                                    h = o / (o + 1),\r\n                                    n =\r\n                                        10 /\r\n                                        Math.sqrt(\r\n                                            Math.pow(5 * Math.cos(r), 2) +\r\n                                            Math.pow(2 * Math.sin(r), 2)\r\n                                        );\r\n                                (s = n * h * Math.sin(r)),\r\n                                    (i = n * h * Math.cos(r)),\r\n                                    l.RTL && (s -= 87),\r\n                                    (l.svgFace_.style.transform =\r\n                                        \"translate(\" + s + \"px, \" + i + \"px)\");\r\n                            }\r\n                        }),\r\n                            document.addEventListener(\"mousemove\", this.windowListener));\r\n                }\r\n            });\r\n        let workspacePositionRect = null;\r\n        (ScratchBlocks.BlockSvg.prototype.getCatFacePosition = function () {\r\n            workspacePositionRect ||\r\n                (workspacePositionRect = this.workspace\r\n                    .getParentSvg()\r\n                    .getBoundingClientRect());\r\n            var t = { x: workspacePositionRect.x, y: workspacePositionRect.y };\r\n            !this.isInFlyout &&\r\n                this.workspace.getFlyout() &&\r\n                (t.x += this.workspace.getFlyout().getWidth()),\r\n                (t.x += this.workspace.scrollX),\r\n                (t.y += this.workspace.scrollY);\r\n            var e = this.getRelativeToSurfaceXY(this.svgGroup_);\r\n            return (\r\n                this.RTL && (e.x = this.workspace.getWidth() - e.x - this.width),\r\n                (e.x += t.x / this.workspace.scale),\r\n                (e.y += t.y / this.workspace.scale),\r\n                (e.x -= 43.5),\r\n                (e.y -= 4),\r\n                (e.x += 60),\r\n                this.RTL && (e.x = screen.width - e.x),\r\n                e\r\n            );\r\n        }),\r\n            (ScratchBlocks.BlockSvg.prototype.shouldWatchMouse = function () {\r\n                return !1;\r\n            });\r\n        const originalRenderDraw = ScratchBlocks.BlockSvg.prototype.renderDraw_;\r\n        ScratchBlocks.BlockSvg.prototype.renderDraw_ = function (...t) {\r\n            this.svgFace_ || this.sa_catBlockConstructor();\r\n            const e = originalRenderDraw.call(this, ...t);\r\n            return (\r\n                this.outputConnection || this.previousConnection || this.initCatStuff(),\r\n                this.startHat_ && !this.svgFace_.firstChild && this.renderCatFace_(),\r\n                e\r\n            );\r\n        };\r\n        const originalDispose = ScratchBlocks.BlockSvg.prototype.dispose;\r\n        ScratchBlocks.BlockSvg.prototype.dispose = function (...t) {\r\n            return (\r\n                clearTimeout(this.blinkFn),\r\n                clearTimeout(this.earFn),\r\n                clearTimeout(this.ear2Fn),\r\n                this.windowListener &&\r\n                document.removeEventListener(\"mousemove\", this.windowListener),\r\n                originalDispose.call(this, ...t)\r\n            );\r\n        };\r\n        const originalSetGlowStack = ScratchBlocks.BlockSvg.prototype.setGlowStack;\r\n        (ScratchBlocks.BlockSvg.prototype.setGlowStack = function (t) {\r\n            return (\r\n                this.windowListener &&\r\n                (t\r\n                    ? (document.removeEventListener(\"mousemove\", this.windowListener),\r\n                        this.workspace &&\r\n                        this.svgFace_.style &&\r\n                        (this.RTL\r\n                            ? (this.svgFace_.style.transform = \"translate(-87px, 0px)\")\r\n                            : (this.svgFace_.style.transform = \"\")))\r\n                    : document.addEventListener(\"mousemove\", this.windowListener)),\r\n                originalSetGlowStack.call(this, t)\r\n            );\r\n        }),\r\n            (ScratchBlocks.BlockSvg.prototype.sa_catBlockConstructor = function () {\r\n                (this.catPath_ = ScratchBlocks.utils.createSvgElement(\r\n                    \"g\",\r\n                    {},\r\n                    this.svgGroup_\r\n                )),\r\n                    (this.svgFace_ = ScratchBlocks.utils.createSvgElement(\r\n                        \"g\",\r\n                        {},\r\n                        this.catPath_\r\n                    )),\r\n                    (this.catPath_.svgFace = this.svgFace_),\r\n                    (this.catPath_.svgBody = this.svgPath_),\r\n                    (this.lastCallTime = 0),\r\n                    (this.CALL_FREQUENCY_MS = 60);\r\n            });\r\n        const workspace = ScratchBlocks.getMainWorkspace();\r\n        if (workspace) {\r\n            const t = workspace.getFlyout();\r\n            if (t) {\r\n                const e = t.getWorkspace();\r\n                ScratchBlocks.Xml.clearWorkspaceAndLoadFromXml(\r\n                    ScratchBlocks.Xml.workspaceToDom(e),\r\n                    e\r\n                ),\r\n                    workspace.getToolbox().refreshSelection(),\r\n                    (workspace.toolboxRefreshEnabled_ = !0);\r\n            }\r\n    \r\n        }\r\n    }\r\n}}","module.exports = {\r\n    func: function () {\r\n        let enableCherryPicking = localStorage.getItem(\"cherrypicking\") === \"true\";\r\n        let invertCherryPicking = false;\r\n\r\n        let enableDuplication = false;\r\n\r\n\r\n        // mostRecentEvent_ is sometimes a fake event, so we can't rely on reading its properties.\r\n        let ctrlOrMetaPressed = false;\r\n        let altPressed = false;\r\n        document.addEventListener(\r\n            \"mousedown\",\r\n            function (e) {\r\n                ctrlOrMetaPressed = e.ctrlKey || e.metaKey;\r\n                altPressed = e.altKey;\r\n            },\r\n            {\r\n                capture: true,\r\n            }\r\n        );\r\n\r\n        let loaded = false;\r\n\r\n        function load() {\r\n            if (loaded) {\r\n                return;\r\n            }\r\n            loaded = true;\r\n\r\n            // https://github.com/scratchfoundation/scratch-blocks/blob/912b8cc728bea8fd91af85078c64fcdbfe21c87a/core/gesture.js#L454\r\n            const originalStartDraggingBlock = ScratchBlocks.Gesture.prototype.startDraggingBlock_;\r\n            ScratchBlocks.Gesture.prototype.startDraggingBlock_ = function (...args) {\r\n                let block = this.targetBlock_;\r\n\r\n                // Scratch uses fake mouse events to implement right click > duplicate\r\n                const isRightClickDuplicate = !(this.mostRecentEvent_ instanceof MouseEvent);\r\n\r\n                const isDuplicating =\r\n                    enableDuplication &&\r\n                    altPressed &&\r\n                    !isRightClickDuplicate &&\r\n                    !this.flyout_ &&\r\n                    !this.shouldDuplicateOnDrag_ &&\r\n                    this.targetBlock_.type !== \"procedures_definition\";\r\n\r\n                const isCherryPickingInverted = invertCherryPicking && !isRightClickDuplicate && block.getParent();\r\n                const canCherryPick = enableCherryPicking || isDuplicating;\r\n                const isCherryPicking = canCherryPick && ctrlOrMetaPressed === !isCherryPickingInverted && !block.isShadow();\r\n\r\n                if (isDuplicating || isCherryPicking) {\r\n                    if (!ScratchBlocks.Events.getGroup()) {\r\n                        // Scratch will disable grouping on its own later.\r\n                        ScratchBlocks.Events.setGroup(true);\r\n                    }\r\n                }\r\n\r\n                if (isDuplicating) {\r\n                    // Based on https://github.com/scratchfoundation/scratch-blocks/blob/feda366947432b9d82a4f212f43ff6d4ab6f252f/core/scratch_blocks_utils.js#L171\r\n                    // Setting this.shouldDuplicateOnDrag_ = true does NOT work because it doesn't call changeObscuredShadowIds\r\n                    this.startWorkspace_.setResizesEnabled(false);\r\n                    ScratchBlocks.Events.disable();\r\n                    let newBlock;\r\n                    try {\r\n                        const xmlBlock = ScratchBlocks.Xml.blockToDom(block);\r\n                        newBlock = ScratchBlocks.Xml.domToBlock(xmlBlock, this.startWorkspace_);\r\n                        ScratchBlocks.scratchBlocksUtils.changeObscuredShadowIds(newBlock);\r\n                        const xy = block.getRelativeToSurfaceXY();\r\n                        newBlock.moveBy(xy.x, xy.y);\r\n                    } catch (e) {\r\n                        console.error(e);\r\n                    }\r\n                    ScratchBlocks.Events.enable();\r\n\r\n                    if (newBlock) {\r\n                        block = newBlock;\r\n                        this.targetBlock_ = newBlock;\r\n                        if (ScratchBlocks.Events.isEnabled()) {\r\n                            ScratchBlocks.Events.fire(new ScratchBlocks.Events.BlockCreate(newBlock));\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (isCherryPicking) {\r\n                    if (isRightClickDuplicate || isDuplicating) {\r\n                        const nextBlock = block.getNextBlock();\r\n                        if (nextBlock) {\r\n                            nextBlock.dispose();\r\n                        }\r\n                    }\r\n                    block.unplug(true);\r\n                }\r\n\r\n                return originalStartDraggingBlock.call(this, ...args);\r\n            };\r\n        }\r\n        load();\r\n    }\r\n}","const contextMenuCallbacks = [];\r\nconst CONTEXT_MENU_ORDER = [\r\n    \"editor-devtools\",\r\n    \"block-switching\",\r\n    \"blocks2image\",\r\n    \"swap-local-global\",\r\n];\r\nlet createdAnyBlockContextMenus = false;\r\nfunction createBlockContextMenu(\r\n    callback,\r\n    { workspace = false, blocks = false, flyout = false, comments = false } = {}\r\n) {\r\n    contextMenuCallbacks.push({\r\n        addonId: this._addonId,\r\n        callback,\r\n        workspace,\r\n        blocks,\r\n        flyout,\r\n        comments,\r\n    });\r\n\r\n    contextMenuCallbacks.sort(\r\n        (b, a) =>\r\n            CONTEXT_MENU_ORDER.indexOf(b.addonId) -\r\n            CONTEXT_MENU_ORDER.indexOf(a.addonId)\r\n    );\r\n\r\n    if (createdAnyBlockContextMenus) return;\r\n    createdAnyBlockContextMenus = true;\r\n\r\n    const oldShow = ScratchBlocks.ContextMenu.show;\r\n    ScratchBlocks.ContextMenu.show = function (event, items, rtl) {\r\n        const gesture = ScratchBlocks.mainWorkspace.currentGesture_;\r\n        const block = gesture.targetBlock_;\r\n\r\n        for (const {\r\n            callback,\r\n            workspace,\r\n            blocks,\r\n            flyout,\r\n            comments,\r\n        } of contextMenuCallbacks) {\r\n            let injectMenu =\r\n                // Workspace\r\n                (workspace && !block && !gesture.flyout_ && !gesture.startBubble_) ||\r\n                // Block in workspace\r\n                (blocks && block && !gesture.flyout_) ||\r\n                // Block in flyout\r\n                (flyout && gesture.flyout_) ||\r\n                // Comments\r\n                (comments && gesture.startBubble_);\r\n            if (injectMenu) {\r\n                try {\r\n                    items = callback(items, block);\r\n                } catch (e) {\r\n                    console.error(\"Error while calling context menu callback: \", e);\r\n                }\r\n            }\r\n        }\r\n\r\n        oldShow.call(this, event, items, rtl);\r\n\r\n        const blocklyContextMenu = ScratchBlocks.WidgetDiv.DIV.firstChild;\r\n        items.forEach((item, i) => {\r\n            if (i !== 0 && item.separator) {\r\n                const itemElt = blocklyContextMenu.children[i];\r\n                itemElt.style.paddingTop = \"2px\";\r\n                itemElt.style.borderTop = \"1px solid hsla(0, 0%, 0%, 0.15)\";\r\n            }\r\n        });\r\n    };\r\n}\r\n\r\nrequire(\"./catblocks\").func();\r\nrequire(\"./numberpad\").func();\r\nrequire(\"./blocks2image\").func(createBlockContextMenu);\r\nrequire(\"./cherrypicking\").func();","module.exports = {\r\n    func: function () {\r\n        if (localStorage.getItem(\"numberpad\") === \"true\") {\r\n            const originalShowEditor_ = ScratchBlocks.FieldNumber.prototype.showEditor_;\r\n            ScratchBlocks.FieldNumber.prototype.showEditor_ = function (...args) {\r\n                this.useTouchInteraction_ = true;\r\n                return originalShowEditor_.apply(this, args);\r\n            };\r\n        }\r\n    }\r\n}","/* (ignored) */"],"mappings":";;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACnBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAEA;;;;;;;;;;;;;;;;;;;;;;;AChCA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,eAGA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AAGA;;;;;;;;;;;;;;ACpFA;AACA;AACA;AACA;AACA;AAaA;AAGA;AAAA;AAFA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAIA;AAIA;AAIA;AAIA;AAKA;AACA;AACA;AAIA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAAA;AAEA;AAEA;AACA;AAAA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAAA;AAEA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AAIA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AAKA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAGA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACpSA;AAAA;AACA;AACA;AACA;AAIA;AACA;AACA;AAMA;AACA;AAMA;AACA;AAKA;AACA;AAKA;AACA;AAeA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AAEA;AACA;AAcA;AAUA;AAQA;AACA;AAEA;AAIA;AACA;AAMA;AACA;AACA;AAEA;AACA;AAEA;AAIA;AACA;AAMA;AACA;AACA;AAEA;AACA;AAIA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA;AAKA;AACA;AAEA;AACA;AACA;AACA;AACA;AAIA;AAAA;AAAA;AAAA;AACA;AAKA;AACA;AAUA;AAEA;AACA;AACA;AACA;AACA;AAAA;AADA;AAAA;AAEA;AACA;AAKA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAQA;AACA;AACA;AACA;AAYA;AAEA;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA;AAEA;AACA;AACA;AAAA;;;;;;;;;;;ACzQA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAGA;AACA;AACA;AAEA;AACA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAQA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AA3DA;AAAA;AA6DA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AClGA;AACA;AAMA;AACA;AAGA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAGA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAQA;AAAA;AANA;AAMA;AALA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;;;;;;;;;;AC5EA;AACA;AACA;AACA;AACA;AACA;AAAA;AADA;AAAA;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACVA;;;;A","sourceRoot":""}